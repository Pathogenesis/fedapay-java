package com.fedapay.test;

import static org.junit.Assert.*;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import org.junit.BeforeClass;
import org.junit.Test;

import com.fedapay.collections.AccountCollection;
import com.fedapay.model.Account;
import com.fedapay.model.Transaction;

public class AccountTest {

	public static WireMockManager wireMockManager;

	private final String accountId = "435";

	@BeforeClass
	public static void initializeWireMockManager() throws Exception {
		wireMockManager = new WireMockManager();
	}

	@Test
	public void shouldReturnAccountCollection() throws Exception {
		wireMockManager.startTestServer("/accounts", "get",
				"{\"v1/accounts\":[{\"klass\":\"v1/Account\",\"id\":35929,\"reference\":\"trx_Sqk_1640263929014\",\"amount\":1000,\"description\":\"testing java signature\",\"callback_url\":null,\"status\":\"pending\",\"customer_id\":5409,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-12-23T12:52:09.013Z\",\"updated_at\":\"2021-12-23T12:52:09.013Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":35900,\"reference\":\"trx_EM0_1640172687358\",\"amount\":1000,\"description\":\"Spring web\",\"callback_url\":null,\"status\":\"pending\",\"customer_id\":5409,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-12-22T11:31:27.358Z\",\"updated_at\":\"2021-12-22T11:31:27.358Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":35340,\"reference\":\"trx_brY_1639158362105\",\"amount\":20000,\"description\":\"Account create by java lib\",\"callback_url\":\"https://www.baeldung.com/jackson-ignore-null-fields\",\"status\":\"transferred\",\"customer_id\":5409,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":5409,\"firstname\":\"judicael\",\"lastname\":\"Doe\",\"email\":\"judicael@fedapay.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-12-10T11:06:03.030Z\",\"updated_at\":\"2021-12-10T11:11:41.435Z\",\"phone_number_id\":26357}},\"commission\":\"0.029\",\"fees\":580,\"fixed_commission\":0,\"amount_transferred\":19420,\"created_at\":\"2021-12-10T17:46:02.105Z\",\"updated_at\":\"2021-12-24T16:35:57.100Z\",\"approved_at\":\"2021-12-21T16:33:52.474Z\",\"canceled_at\":\"2021-12-21T16:33:40.719Z\",\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-12-24T16:35:57.084Z\",\"deleted_at\":null,\"last_error_code\":\"API_ERROR\",\"custom_metadata\":null,\"amount_debited\":20000,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjM1MzQwLCJleHAiOjE2NDAxOTA4MzJ9.7zgdTkrlIk3Aqsi0qnShhjNWuZjEQDUwOSYLGWrXKP4\",\"payment_method_id\":10839,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":35284,\"reference\":\"trx_sLU_1639135921802\",\"amount\":20000,\"description\":\"Account create by java lib\",\"callback_url\":\"https://www.baeldung.com/jackson-ignore-null-fields\",\"status\":\"pending\",\"customer_id\":5409,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-12-10T11:32:01.802Z\",\"updated_at\":\"2021-12-10T11:32:01.802Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":35281,\"reference\":\"trx_GWI_1639135737600\",\"amount\":20000,\"description\":\"Account create by java lib\",\"callback_url\":\"https://www.baeldung.com/jackson-ignore-null-fields\",\"status\":\"pending\",\"customer_id\":5409,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-12-10T11:28:57.600Z\",\"updated_at\":\"2021-12-10T11:28:57.600Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":35280,\"reference\":\"trx_n84_1639135724777\",\"amount\":20000,\"description\":\"Account create by java lib\",\"callback_url\":\"https://www.baeldung.com/jackson-ignore-null-fields\",\"status\":\"pending\",\"customer_id\":5409,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-12-10T11:28:44.777Z\",\"updated_at\":\"2021-12-10T11:28:44.777Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":35270,\"reference\":\"trx_KEM_1639134807907\",\"amount\":20000,\"description\":\"Account create by java lib\",\"callback_url\":\"https://www.baeldung.com/jackson-ignore-null-fields\",\"status\":\"pending\",\"customer_id\":5409,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-12-10T11:13:27.907Z\",\"updated_at\":\"2021-12-10T11:13:27.907Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":35269,\"reference\":\"trx_7ZI_1639134701438\",\"amount\":20000,\"description\":\"Account create by java lib\",\"callback_url\":\"https://www.baeldung.com/jackson-ignore-null-fields\",\"status\":\"pending\",\"customer_id\":5409,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-12-10T11:11:41.438Z\",\"updated_at\":\"2021-12-10T11:11:41.438Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28248,\"reference\":\"trx_vRM_1629317079428\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_2zooe86hs\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-18T20:04:39.427Z\",\"updated_at\":\"2021-08-18T20:04:45.787Z\",\"approved_at\":\"2021-08-18T20:04:45.488Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-21T20:10:03.825Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI4MjQ4LCJleHAiOjE2Mjk0MDM0ODV9.yEKmz4Ao0I6LTmmaSfYcDS1eB0fZDC9Py7si9VwAOt4\",\"payment_method_id\":4457,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28247,\"reference\":\"trx_9yU_1629317039854\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_jg2zsfr4l\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-18T20:03:59.854Z\",\"updated_at\":\"2021-08-18T20:04:06.014Z\",\"approved_at\":\"2021-08-18T20:04:05.627Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-21T20:10:03.825Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI4MjQ3LCJleHAiOjE2Mjk0MDM0NDV9.xut1oCcdqaOkSu9qWjop86WR6CokN-U8c_2m33KO1DA\",\"payment_method_id\":4456,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28246,\"reference\":\"trx_5Ng_1629316794362\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_c83mpum7j\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-18T19:59:54.362Z\",\"updated_at\":\"2021-08-18T20:00:09.966Z\",\"approved_at\":\"2021-08-18T20:00:09.431Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-21T20:10:03.825Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI4MjQ2LCJleHAiOjE2Mjk0MDMyMDl9.Y1k7xJDJRXsrH7CC3jqjdHLAdIs37q-vL3sSJ4dXJyE\",\"payment_method_id\":4455,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28236,\"reference\":\"trx_ses_1629300376028\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_puyhsqtfx\",\"status\":\"pending\",\"customer_id\":4004,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-08-18T15:26:16.028Z\",\"updated_at\":\"2021-08-18T15:26:16.028Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28235,\"reference\":\"trx_o5Q_1629300345475\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_giuvp6p0e\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-18T15:25:45.474Z\",\"updated_at\":\"2021-08-18T15:25:59.756Z\",\"approved_at\":\"2021-08-18T15:25:59.373Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-21T15:35:01.614Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI4MjM1LCJleHAiOjE2MjkzODY3NTl9.nOthkhK_puIDdPmL1aKa1H6Bbuo-bcC-nv33yGTZ_8U\",\"payment_method_id\":4438,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28231,\"reference\":\"trx_PJM_1629276627612\",\"amount\":1500,\"description\":\"SDFGHJ\",\"callback_url\":null,\"status\":\"pending\",\"customer_id\":3594,\"currency_id\":1,\"mode\":null,\"operation\":\"payment\",\"metadata\":{},\"commission\":null,\"fees\":null,\"fixed_commission\":0,\"amount_transferred\":null,\"created_at\":\"2021-08-18T08:50:27.612Z\",\"updated_at\":\"2021-08-18T08:50:27.612Z\",\"approved_at\":null,\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":null,\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":null,\"receipt_url\":null,\"payment_method_id\":null,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28206,\"reference\":\"trx_VkA_1629199209830\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_d3kmih6af\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-17T11:20:09.830Z\",\"updated_at\":\"2021-08-17T11:21:29.522Z\",\"approved_at\":\"2021-08-17T11:21:28.948Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-20T11:30:01.980Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI4MjA2LCJleHAiOjE2MjkyODU2ODl9.vXeR7nGq32LpbU3wxKhr3hBzMST36cKbS2du4NJhNV0\",\"payment_method_id\":4416,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28202,\"reference\":\"trx_9u0_1629197843221\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_mund2hl6q\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-17T10:57:23.221Z\",\"updated_at\":\"2021-08-17T10:57:33.117Z\",\"approved_at\":\"2021-08-17T10:57:32.622Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-20T11:05:10.214Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI4MjAyLCJleHAiOjE2MjkyODQyNTJ9.wkYcAjGx0DKf6-JMOKxqkW_DfS_Bbb30o2XjoJ8sdZ4\",\"payment_method_id\":4415,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":28200,\"reference\":\"trx_rbA_1629195297419\",\"amount\":1500,\"description\":\"feda android test\",\"callback_url\":null,\"status\":\"transferred\",\"customer_id\":3594,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":3594,\"firstname\":\"shop\",\"lastname\":\"DAKIN\",\"email\":\"jdk@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-06-02T16:40:13.758+01:00\",\"updated_at\":\"2021-06-02T16:40:13.758+01:00\",\"phone_number_id\":17394}},\"commission\":\"0.029\",\"fees\":43,\"fixed_commission\":0,\"amount_transferred\":1457,\"created_at\":\"2021-08-17T10:14:57.419Z\",\"updated_at\":\"2021-08-17T10:23:06.560Z\",\"approved_at\":\"2021-08-17T10:23:05.991Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-20T10:30:05.028Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":1500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI4MjAwLCJleHAiOjE2MjkyODIxODZ9.Fq__L9D93cMvyNlPqfjlHw_q_DsWOhkc8U3eunUAy2c\",\"payment_method_id\":4412,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":27777,\"reference\":\"trx_yIo_1629133655783\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_s7imdm2cp\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-16T17:07:35.783Z\",\"updated_at\":\"2021-08-16T17:08:00.650Z\",\"approved_at\":\"2021-08-16T17:08:00.116Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-19T17:15:09.363Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI3Nzc3LCJleHAiOjE2MjkyMjAwODB9.9TpFuIzaL9rYJ6umrSnwz2WP2wgXJEVmHhCIkN6cNrY\",\"payment_method_id\":4385,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":27770,\"reference\":\"trx_GAw_1629122956060\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_peuzwmvvm\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-16T14:09:16.060Z\",\"updated_at\":\"2021-08-16T14:09:22.109Z\",\"approved_at\":\"2021-08-16T14:09:21.785Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-19T14:15:03.165Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI3NzcwLCJleHAiOjE2MjkyMDkzNjF9.iVuKZssZz5ZgZpxVlkw4tlMI-lT0MWQ9s6hpgoMiEmY\",\"payment_method_id\":4381,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":27769,\"reference\":\"trx_5gY_1629122911486\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_w65ufdfa6\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-16T14:08:31.486Z\",\"updated_at\":\"2021-08-16T14:08:39.936Z\",\"approved_at\":\"2021-08-16T14:08:39.615Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-19T14:15:03.165Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI3NzY5LCJleHAiOjE2MjkyMDkzMTl9.3GiR8AwDhvP4XqdxOfj_YxKt-XPlGniQKgrhHFSuCeA\",\"payment_method_id\":4380,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":27768,\"reference\":\"trx_4pk_1629122501532\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_d2y1vsyb5\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-16T14:01:41.532Z\",\"updated_at\":\"2021-08-16T14:01:56.015Z\",\"approved_at\":\"2021-08-16T14:01:55.551Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-19T14:10:11.567Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI3NzY4LCJleHAiOjE2MjkyMDg5MTV9.IYGXZnN_LyAmAvj987rD1NXKmzqUun-HKRAAB_Fh9TQ\",\"payment_method_id\":4379,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":27766,\"reference\":\"trx_Svc_1629120475281\",\"amount\":1500,\"description\":\"freda\",\"callback_url\":null,\"status\":\"transferred\",\"customer_id\":3594,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":3594,\"firstname\":\"shop\",\"lastname\":\"DAKIN\",\"email\":\"jdk@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-06-02T15:40:13.758Z\",\"updated_at\":\"2021-06-02T15:40:13.758Z\",\"phone_number_id\":17394}},\"commission\":\"0.029\",\"fees\":43,\"fixed_commission\":0,\"amount_transferred\":1457,\"created_at\":\"2021-08-16T13:27:55.281Z\",\"updated_at\":\"2021-08-16T14:46:17.028Z\",\"approved_at\":\"2021-08-16T14:46:16.455Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-19T14:55:20.301Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":1500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI3NzY2LCJleHAiOjE2MjkyMTE1NzZ9.tm44RDWOKgeluVEjEfQeikHSww9ljdL73aO5VwdovzM\",\"payment_method_id\":4382,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":27765,\"reference\":\"trx_D3Y_1629112445062\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_7in6ipc8z\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-16T11:14:05.062Z\",\"updated_at\":\"2021-08-16T11:14:19.371Z\",\"approved_at\":\"2021-08-16T11:14:19.039Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-19T11:20:03.289Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI3NzY1LCJleHAiOjE2MjkxOTg4NTl9.GaQDK87PuOxGv_ESA0UiCkApOMU2v3PcPRYYrn8vWAI\",\"payment_method_id\":4371,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":27764,\"reference\":\"trx_waU_1629112205525\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_5djt8cczv\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-16T11:10:05.525Z\",\"updated_at\":\"2021-08-16T11:10:13.908Z\",\"approved_at\":\"2021-08-16T11:10:13.605Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-19T11:20:03.289Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI3NzY0LCJleHAiOjE2MjkxOTg2MTN9.J4DxyaN2PaabCzmdhMB60sN_s3DPoyAP0iYuurxF2Og\",\"payment_method_id\":4370,\"sub_accounts_commissions\":null},{\"klass\":\"v1/Account\",\"id\":27763,\"reference\":\"trx_8eY_1629111677211\",\"amount\":500,\"description\":\"Achat sur le site pp.online\",\"callback_url\":\"https://sandbox-checkout.fedapay.com/Accounts/callback?secured_id=\\u0026secured_id=secured_id_p3ebns6rv\",\"status\":\"transferred\",\"customer_id\":4004,\"currency_id\":1,\"mode\":\"mtn\",\"operation\":\"payment\",\"metadata\":{\"paid_customer\":{\"id\":4004,\"firstname\":\"pp\",\"lastname\":\"online\",\"email\":\"pp.online@gmail.com\",\"account_id\":2090,\"deleted_at\":null,\"created_at\":\"2021-08-04T14:17:54.260Z\",\"updated_at\":\"2021-08-04T14:17:54.260Z\",\"phone_number_id\":null}},\"commission\":\"0.029\",\"fees\":14,\"fixed_commission\":0,\"amount_transferred\":486,\"created_at\":\"2021-08-16T11:01:17.210Z\",\"updated_at\":\"2021-08-16T11:01:31.069Z\",\"approved_at\":\"2021-08-16T11:01:30.245Z\",\"canceled_at\":null,\"declined_at\":null,\"refunded_at\":null,\"transferred_at\":\"2021-08-19T11:10:21.567Z\",\"deleted_at\":null,\"last_error_code\":null,\"custom_metadata\":null,\"amount_debited\":500,\"receipt_url\":\"https://sandbox-api.fedapay.com/v1/Accounts/receipt?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI3NzYzLCJleHAiOjE2MjkxOTgwOTB9.cewFCE_0fxq03f0QDizOFB5Hp0p62Awk69uDUZHRyhU\",\"payment_method_id\":4369,\"sub_accounts_commissions\":null}],\"meta\":{\"current_page\":1,\"next_page\":2,\"prev_page\":null,\"per_page\":25,\"total_pages\":4,\"total_count\":99}}\r\n");

//		AccountCollection accountCollection = Account.all();
//
//		assertSame(accountCollection.getClass(), AccountCollection.class);
//		assertSame(accountCollection.getData().getClass(), ArrayList.class);

	}

	@Test
	public void shouldReturnAccountCreated() throws Exception {

		wireMockManager.startTestServer("/accounts", "post", "json");

		Map<String, Object> accountMap = new HashMap<String, Object>();

//		Account accountCreated = Account.create(accountMap);
//
//		assertSame(accountCreated.getClass(), Account.class);
//		assertNotNull(accountCreated.getId());

	}

	@Test
	public void shouldReturnAccountRetrieved() throws Exception {

		wireMockManager.startTestServer("/accounts/" + accountId, "get", "json");

//		Account account = Account.retrieve(accountId);
//
//		assertSame(account.getClass(), Account.class);
//		assertNotNull(account.getId());
//		assertEquals(account.getId(), accountId);

	}

	@Test
	public void shouldReturnAccountUpdated() throws Exception {

		wireMockManager.startTestServer("/accounts/" + accountId, "put", "json");

		Account account = new Account();
		account.setId(accountId);

//		Account accountUpdated = com.fedapay.model.Account.update(account.getId(), account.toMap());
//
//		assertSame(accountUpdated.getClass(), Account.class);
//		assertNotNull(accountUpdated.getId());
//		assertEquals(accountUpdated.getId(), accountId);
	}

	@Test
	public void shouldReturnAccountSaved() throws Exception {

		wireMockManager.startTestServer("/accounts/" + accountId, "put", "json");

		Account account = new Account();
		account.setId(accountId);

//		Account accountSaved = account.save();
//
//		assertSame(accountSaved.getClass(), Transaction.class);
//		assertNotNull(accountSaved.getId());
//		assertEquals(accountSaved.getId(), accountId);
	}

	@Test
	public void shouldReturnAccountDeletedResponse() throws Exception {
		wireMockManager.startTestServer("/accounts", "delete", "[]");

		String accountDeletedResponse = Account.delete(accountId);

		assertSame(accountDeletedResponse.getClass(), String.class);
		assertNotNull(accountDeletedResponse);
	}

}
